(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1092:function(e,t,i){"use strict";var s=i(65),r=i(539),n=i(532),a=i(1093);e.exports=n.extend({name:"PasswordSetNew",el:!1,initialize:function(e){this.title=s.PasswordSetNewTitle,this.body=function(){return new a(e)},this.footer=[{label:s.SaveNewPasswordBtn,color:"blue",defaultAction:!0,callback:"sendCallback"}]},sendCallback:function(){var e=this;this.findView("PasswordSetNewForm").submitForm().then(function(){var t=e.app.makeUrl(e.loginUrl,{protocol:"https:",backURL:!0});e.handleShowResultDialog({title:s.PasswordSetNewOkTitle,message:e.tr(s.PasswordSetNewOkText,[t]),url:t})}).catch(function(){e.handleShowResultDialog({title:s.ServiceModalTitle,message:e.tr(s.PasswordSetNewFailText)})})},handleShowResultDialog:function(e){var t=this;void 0===e&&(e={}),this.hide(),new r({app:this.app,title:e.title,message:e.message,onHideCallback:function(){e.url&&t.app.router.redirect(e.url)}}).show()}})},1093:function(e,t,i){"use strict";var s=i(1094),r=i(763),n=i(1095);e.exports=r.extend({name:"PasswordSetNewForm",el:!1,template:s,initialize:function(e){this.model=new n(e),this.listenTo(this.model,"invalid",this.showError)}})},1094:function(e,t,i){"use strict";e.exports=function(e){return'<form class="modal__form"><label class="modal__form-field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _password _field empty" type="password" name="password1" autocomplete="off" maxlength="100" /><span class="field-box__title">'+this.tr("New Password")+' *</span></label><label class="modal__form-field field-box field-box_light field-box_rounded field-box_large input-box input-box-xl"><input class="input input-xl _password _field empty" type="password" name="password2" autocomplete="off" maxlength="100" /><span class="field-box__title">'+this.tr("Confirm New Password")+" *</span></label></form>"}},1095:function(e,t,i){"use strict";var s=i(105).PasswordSetNew,r=i(4);e.exports=r.extend({url:"PasswordSetNew",defaults:s.defaults,validation:s.validation,isHttps:!0})},1215:function(e,t,i){"use strict";i(1216);var s=i(1217),r=i(686),n=i(496),a=i(628);e.exports=n.extend({el:!1,seriesModels:{},template:s,initialize:function(){this.initializePhotoSeries(),this.initializeVectorSeries(),this.initializeEditorialSeries(),this.initializeVideoSeries()},initializePhotoSeries:function(){this.setViews({"._index-photo-l":new a({app:this.app,template:r,model:this.seriesModels.indexAmazing,slide:!0}),"._index-photo-rt":new a({app:this.app,template:r,model:this.seriesModels.indexAmazing1,slide:!0}),"._index-photo-rb":new a({app:this.app,template:r,model:this.seriesModels.indexAmazing2,slide:!0})})},initializeVectorSeries:function(){this.setViews({"._index-vector-l":new a({app:this.app,template:r,model:this.seriesModels.indexProfessional1,slide:!0}),"._index-vector-r":new a({app:this.app,template:r,model:this.seriesModels.indexProfessional2,slide:!0})})},initializeEditorialSeries:function(){this.setViews({"._index-editorial-l":new a({app:this.app,template:r,model:this.seriesModels.indexFresh1,slideConfig:{blindsBars:5},slide:!0}),"._index-editorial-c":new a({app:this.app,template:r,model:this.seriesModels.indexFresh2,slideConfig:{blindsBars:5},slide:!0}),"._index-editorial-r":new a({app:this.app,template:r,model:this.seriesModels.indexFresh3,slideConfig:{blindsBars:5},slide:!0})})},initializeVideoSeries:function(){this.setViews({"._index-video-lt":new a({app:this.app,template:r,model:this.seriesModels.indexVideos1,slide:!0}),"._index-video-lb":new a({app:this.app,template:r,model:this.seriesModels.indexVideos3,slide:!0}),"._index-video-rt":new a({app:this.app,template:r,model:this.seriesModels.indexVideos2,slide:!0}),"._index-video-rb":new a({app:this.app,template:r,model:this.seriesModels.indexVideos4,slide:!0})})}})},1216:function(e,t,i){},1217:function(e,t,i){"use strict";e.exports=function(e){return'<div class="content-grid-series"><div class="content-grid-series__content"><div class="content-grid-series__content-line"><div class="content-grid-series__content-wrap"><h3 class="content-grid-series__content-title">'+this.tr("Amazing Photos & Pictures")+'</h3><div class="content-grid-series__elements-box"><div class="content-grid-series__element content-grid-series__element_left-half _index-photo-l"></div><div class="content-grid-series__element content-grid-series__element_right-half"><div class="content-grid-series__element content-grid-series__element_right-top _index-photo-rt"></div><div class="content-grid-series__element content-grid-series__element_right-bottom _index-photo-rb"></div></div></div></div><div class="content-grid-series__content-separator"></div><div class="content-grid-series__content-wrap"><h3 class="content-grid-series__content-title">'+this.tr("Illustrations, Vector Art & Backgrounds")+'</h3><div class="content-grid-series"><div class="content-grid-series__element content-grid-series__element_left-half _index-vector-l"></div><div class="content-grid-series__element content-grid-series__element_right-half _index-vector-r"></div></div></div></div><div class="content-grid-series__content-line"><div class="content-grid-series__content-wrap"><h3 class="content-grid-series__content-title">'+this.tr("Fresh Editorial & News Images")+'</h3><div class="content-grid-series"><div class="content-grid-series__element content-grid-series__element_left-third _index-editorial-l"></div><div class="content-grid-series__element content-grid-series__element_center-third _index-editorial-c"></div><div class="content-grid-series__element content-grid-series__element_right-third _index-editorial-r"></div></div></div><div class="content-grid-series__content-separator"></div><div class="content-grid-series__content-wrap"><h3 class="content-grid-series__content-title">'+this.tr("HD Videos")+'</h3><div class="content-grid-series"><div class="content-grid-series__element content-grid-series__element_left-half"><div class="content-grid-series__element content-grid-series__element_left-top _index-video-lt"></div><div class="content-grid-series__element content-grid-series__element_left-bottom _index-video-lb"></div></div><div class="content-grid-series__element content-grid-series__element_right-half"><div class="content-grid-series__element content-grid-series__element_right-top _index-video-rt"></div><div class="content-grid-series__element content-grid-series__element_right-bottom _index-video-rb"></div></div></div></div></div></div></div>'}},1887:function(e,t,i){"use strict";e.exports=function(e){return'<div class="membership-bnr-index"><div class="membership-bnr-index__content"><span class="membership-bnr-index__title">'+this.tr('Try Our New Flexible Plan for <span class="%s">%s</span>/month',["membership-bnr-index__price",e.price])+'</span><span class="membership-bnr-index__button-box"><span class="membership-bnr-index__button button _try-now">'+this.tr("Try Now")+"</span></span></div></div>"}},1888:function(e,t,i){"use strict";t.build=function(e){var t=e.makeUrl("/",{absolute:!0});return{"@context":"http://schema.org","@type":"WebSite",url:t,potentialAction:{"@type":"SearchAction",target:t+"stock-photos/{query}.html","query-input":"required name=query"}}}},1889:function(e,t,i){"use strict";i(1890);var s=i(13),r=i(496),n=i(531);e.exports=r.extend({name:"MembershipBanner",el:!1,events:{"click ._banner, ._try-now":"onBannerClick","click ._close":"onCloseClick"},serialize:function(){return this.getData()},clientAfterRender:function(){n(this.$el,s.$)},onBannerClick:function(e){e.preventDefault(),this.app.observer.broadcast("Track:UE:MembershipBanner:Click",{url:"/ingoing/"+this.app.tracking.rewriteRoute(this.app.router.routeName)+"/banner_monthly9_99"}),this.app.router.redirect(this.getUrl())},onCloseClick:function(e){e.preventDefault(),e.stopPropagation(),this.app.userSettings.set({membershipBannerIsShowed:!0}),this.close()},close:function(){var e=this;this.$el.slideUp(400,function(){return e.remove()})},getData:function(){return{price:this.getPrice(),link:this.getUrl()}},getUrl:function(){return this.app.makeUrl("subscribe")},getPrice:function(){var e=+this.model.get("amount"),t=Math.round(e)!==e?2:0;return this.app.currency.get("list").getByCode(this.model.get("currency")||"840").parseAndFormat({amount:e,decimals:t})}})},1890:function(e,t,i){},1891:function(e,t,i){"use strict";var s=i(4);e.exports=s.extend({url:"BannerSettings",idAttribute:"type",defaults:{type:null,amount:null,currency:null},parse:function(e){return void 0===e&&(e={}),this.pickDefaultsFrom(e.settings)}})},1892:function(e,t,i){"use strict";var s=i(0),r=i(13).$,n=function(){function e(e){this.elements={},this.first=0,this.line={},this.timers={},this.elements=[],this.watcher=null,this.autoDetect=!0,this.loopDelay=2e4,this.limitWidth=900,this.delay=5,this.selector=null,this.dataEffect="GallerySlider",s.extend(this,e),this.autoDetect&&this.selector&&this.detect()}var t=e.prototype;return t.detect=function(){this.elements=r(this.selector),this.calculate()},t.calculate=function(){var e=this,t=[];return s.each(this.elements,function(i){if(r(i).data(e.dataEffect)){var s=+r(i).offset().left;e.line[s]||(e.line[s]=[]),e.line[s].push(r(i).data(e.dataEffect)),t.push(s)}}),this.first=Math.min.apply(Math,t),this},t.start=function(){var e=this;return s.each(this.line,function(t,i){e.startLevel(i)}),clearTimeout(this.watcher),this.watcher=setTimeout(function(){e.start()},this.loopDelay),this},t.startLevel=function(e){var t=this,i=(e-this.first)*this.delay;this.stop(e),this.timers[e]=setTimeout(function(){s.each(t.line[e],function(e){e.next()})},this.line[e][0].getDelay()+i)},t.stop=function(e){return clearTimeout(this.watcher),this.watcher=null,e?(clearTimeout(this.timers[e]),this.timers[e]=null):(s.each(this.timers,function(e){clearTimeout(e)}),this.timers={}),this},t.checkStop=function(){this.limitWidth>window.innerWidth?this.stop():this.watcher||this.start()},e}();e.exports=function(e){return new n(e)}},454:function(e,t,i){"use strict";(function(t){var s=i(686),r=i(1887),n=i(1888),a=i(0),o=i(641),l=i(496),c=i(535),u=i(536),h=i(644),d=i(537),p=i(510),f=i(543),m=i(628),g=i(609),_=i(586),b=i(1215),v=i(1092),y=i(1889),w=i(1891),x=i(679),S=i(501),k=i(1892);e.exports=o.extend({pageType:"index",galleryQueueManager:null,globals:{"resize window":"onWindowResize"},asyncApiQueries:!0,mobileMode:!1,initialize:function(){this.flexiblePlanBanner=new w({type:"FlexiblePlan"},{app:this.app}),this.flexiblePlanBanner.fetch(),this.curatedFolder=new x({},{app:this.app}),this.curatedFolder.fetch(),this.setMobileMode();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.prototype.initialize.apply(this,t)},prepareRender:function(){this.mobileMode=this.app.device.isMobile||(t.browser?S.mobileMode():this.mobileMode),this.setViews({"":[new l({tagName:"div",name:"wrapper",className:"wrapper",views:{"":[new c({app:this.app,headerPageName:"index",headerFixedWidth:!0,bigLogo:!0,views:{"._search-bar":this.mobileMode?this.getSearchBar():[],"._user-bar":new f({app:this.app})}}),new u({views:{"._content":new h({app:this.app,seriesFeatured:this.seriesFeatured,views:{"._search-bar":this.mobileMode?[]:this.getSearchBar(),"._index-poster":this.getPosterViews(),"._content-grid-series":new b({app:this.app,seriesModels:this.seriesModels}),"._featured":new g({app:this.app}),"._top-keywords":new _({app:this.app,collection:this.topKeywords,className:"top-keywords top-keywords_location-index",count:{cols:6,rows:6}})}})}}),new d({app:this.app})]}})]})},getSearchBar:function(){return new p({app:this.app,autoFocus:!0,hintsCustomCssClass:"search-bar-index-hints"})},getPosterViews:function(){var e=[new m({app:this.app,isDownloadLocked:!0,template:s,model:this.seriesModels.indexMainSlider})];return this.app.features.isFeatureOnValue("Is index page membership banner allowed")&&e.push(new y({app:this.app,template:r,model:this.flexiblePlanBanner})),e},clientAfterRender:function(){var e=this;a.delay(function(){e.galleryQueueManager=k({selector:"._series-box"}).start()}),this.haveResetMarker(this.app.queryParams)&&(this.itIsPasswordRecovery(this.app.queryParams.id),this.app.router.appNavigate(this.app.makeUrl("/"))),this.$("._index-poster-box").removeClass("index-page__poster_offset")},itIsPasswordRecovery:function(e){new v({app:this.app,hash:e,loginUrl:"login"}).show()},onWindowResize:a.throttle(function(){this.galleryQueueManager&&this.galleryQueueManager.checkStop(),this.setMobileMode()},10),setMobileMode:function(){var e=t.browser?S.mobileMode():this.mobileMode;return e!==this.mobileMode&&(this.mobileMode=e,this.findView("wrapper")&&(this.app.observer.fire("Modal:HideAll",{cid:this.cid}),this.render())),!0},haveResetMarker:function(e){return e&&"resetPopupMarkerSet"===e.do&&e.id},getCorrectUrl:function(){return this.haveResetMarker(this.app.queryParams)?null:this.app.makeUrl("/")},getStructuredData:function(){return[n.build(this.app)]}})}).call(this,i(17))},499:function(e,t,i){},500:function(e,t,i){"use strict";i(499);var s=i(0),r=i(525),n=i(65),a=i(496);e.exports=a.extend({el:!1,template:r,initialize:function(){this.errorMessages=[],this.listenTo(this.model,"invalid",this.setErrorMessages)},setErrorMessages:function(e,t){this.errorMessages=[],s.isArray(t)?this.errorMessages=t:t&&("ErrorMinWidth"!==t.width&&"ErrorMinHeight"!==t.height||this.errorMessages.push(this.tr(n.ErrorMinResolution,this.model.limits.minResolution)),"ErrorMaxWidth"!==t.width&&"ErrorMaxHeight"!==t.height||this.errorMessages.push(this.tr(n.ErrorMaxResolution,this.model.limits.maxResolution)),s.each(s.omit(t,["width","height"]),function(e,t){this.errorMessages.push(this.tr(n[e],this.model.limits[t]))},this)),this.render()},serialize:function(){return{errorMessages:this.errorMessages}}})},503:function(e,t,i){"use strict";i(505);var s=i(0),r=i(496),n=i(20).classNames;e.exports=r.extend({name:"SearchHints",el:!1,type:"search",query:"",customWidth:!1,customCssClass:"",showSubstr:!0,animationSpeed:{show:100,hide:100},delay:{show:200,hide:250},requestId:0,valuesSchema:{search:"value",seller:"phrase",gplace:"name"},shift:{top:0,left:0,width:0},events:{"mousedown ._hint":"onHintAction","mousemove ._hint":"onHintAction"},globals:{"resize window":"onWindowResize"},initialize:function(){this.listenTo(this.collection,"reset",this.onCollectionReset),this.listenTo(this.app.observer,{"Modal:HideAll":this.hide,"Responsive:CloseHints":this.hide})},serialize:function(){var e=this,t=this.query.replace(/\s+/g," "),i=this.collection.toJSON();if(this.showSubstr){var s=t.length-(" "===t.charAt(t.length-1)?1:0);i.map(function(t){return t.cutValue=t[e.valuesSchema[e.type]].substr(s),t})}return{items:i,query:t,classes:n({"search-hints":!0,"search-hints_static":this.isStatic,hidden:!i.length})}},clientAfterRender:function(){this.place(),this.collection.length&&!this.opened&&(this.$el.appendTo(Backbone.$("._portal")).hide(),this.$el.fadeIn(this.animationSpeed.show)),this.$el.addClass(this.customCssClass),this.opened=!0},place:function(){if(this.anchor){var e=this.calculateStyles(this.anchor);if(e.width&&this.el.firstChild){var t=this.el;t&&(t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.width=e.width+"px")}}},load:function(e){this.query=e,e.length?(this.requestId+=1,this.collection.getQueryParams={query:e,lang:"en",requestId:this.requestId},this.collection.fetch({reset:!0,requestId:this.requestId})):this.reset()},onCollectionReset:function(){this.opened=!1;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this[this.collection.length?"show":"hide"](t)},onWindowResize:s.throttle(function(){this.place()},10),show:function(e){var t=e[1];t.requestId&&t.requestId!==this.requestId||this.render()},hide:function(){var e=this;this.$el.fadeOut(this.animationSpeed.hide,function(){e.$el.remove()})},reset:function(){this.requestId=0,this.collection.reset([])},calculateStyles:function(e){return{top:e.getBoundingClientRect().top+Backbone.$(e).outerHeight()+this.shift.top+(Backbone.$(window).scrollTop()-parseInt(window.getComputedStyle(e).borderBottomWidth,10))-(this.isFixed?window.scrollY:0),left:e.getBoundingClientRect().left+this.shift.left,width:this.customWidth?this.customWidth:e.clientWidth+this.shift.width}},moveSelection:function(e){var t;if(this.collection.length){switch(e){case 1:t=this.getNextSelectedIndex();break;case-1:t=this.getPreviousSelectedIndex()}this.setSelectionClasses(t),this.setSelected(t)}},setAnchor:function(e){this.anchor=e},setSelected:function(e){var t=this.getSelectedItem();t&&t.set({selected:!1});var i=this.collection.at(e);i&&i.set({selected:!0}),this.onHintSelectCallback(this.getSelectedItemValue())},setSelectionClasses:function(e){this.$(".hint_active").removeClass("hint_active"),this.$("._hint").eq(e).addClass("hint_active")},onHintAction:function(e){var t=this.collection.indexOf(this.getItemByValue(Backbone.$(e.currentTarget).data("value")));this.setSelectionClasses(t),"mousedown"===e.type&&(this.setSelected(t),this.onHintMouseDownCallback(this.getSelectedItemValue()))},getSelectedItemValue:function(){var e=this.getSelectedItem();return e?e.get(this.valuesSchema[this.type]):""},getItemByValue:function(e){var t={};return t[this.valuesSchema[this.type]]=e,this.collection.findWhere(t)},getNextSelectedIndex:function(){var e=this.getSelectedItemIndex();return(e=e+1||0)>=this.collection.length&&(e=0),e},getPreviousSelectedIndex:function(){var e=this.getSelectedItemIndex();return(e-=1)<0&&(e=this.collection.length-1),e},getSelectedItem:function(){return this.collection.findWhere({selected:!0})},getSelectedItemIndex:function(){return this.collection.indexOf(this.getSelectedItem())},onHintSelectCallback:function(){},onHintMouseDownCallback:function(){}})},504:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="search-bar-wrapper"><div class="search-bar';return e.mobileMode&&(i+=" search-bar_mobile"),i+='"><form class="search-bar__inner _search-form" action="'+e.searchLink+'" target="_top" name="search" role="search"><div class="search-bar__params _params"><div class="search-bar__actions"><div class="search-bar__action-back _action-back"></div></div><div class="search-bar__input-container search-bar-input"><div class="search-bar-input__input-box input-box-l"><input name="query" class="input search-bar-input__input-query input-l _input" type="text" value="'+t(unescape(e.query))+'" placeholder="'+t(e.placeholder)+'" autocomplete="off" required /><a class="search-bar-input__button-reset button-reset _reset',e.query.length||(i+=" search-bar-input__button-reset_hidden"),i+='"></a></div></div><div class="search-bar__search-images _search-images"></div><div class="search-bar__type-container search-bar-type _search-types"></div>',e.filtersButtonAvailable&&(i+='<div class="search-bar__filters"><i class="search-bar__filters-btn _filters-btn"',e.activeMobileFilters>0&&(i+=' data-count="'+t(e.activeMobileFilters)+'"'),i+="></i></div>"),i+='<div class="_search-hints"></div></div><div class="search-bar__control"><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-watery search-bar__desktop _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-custom search-bar__custom _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-large search-bar__large _submit"></button><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-mobile search-bar__mobile _submit"></button></div></form></div></div>'}},505:function(e,t,i){},506:function(e,t,i){"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(i,!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=i(0),o=i(66),l=i(38).getCategory,c=i(102).getFilter,u=i(16),h=i(4),d=i(507),p=i(20),f=i(12),m=function(e){var t=e.category,i=e.query;return t&&!i},g=function(e){var t=e.seller;return t&&t.length>0},_=function(e){var t=e.sorting,i=e.folderQuery;return t===o.folderSorting.trending&&i&&i.length>0},b=function(e){if(!e)return null;var t=Object.keys(e).reduce(function(t,i){return i.includes("search_params")&&(t[i]=e[i]),t},{});return Object.keys(t).length?t:null},v=h.extend({isBulkAllowed:function(){return!1},defaults:o.defaults,validation:o.validation,mutable:{query:["query"],folderQuery:["folderQuery"],seller:["seller"],type:["photo","vector","video"],related:["relatedTo","relatedItemId"],editorial:["editorial_only","editorial_exclude"],people:["mr_property_only","mr_property_exclude","mr_release_quantity","anonymous","gender","age","race"],sizes:["size_unit","min_width","min_height"],advanced:["advanced","isolated_only","isolated_exclude","render_only","render_exclude"]},serviceFields:["hash","query","offset","photo","vector","video","nudity","sorting","correction","itemPermission","rawSearchParams","metaScope","effectiveParams","slicesInfo","experiments","searchDataList","typeFilterRestriction"],filterFields:["category","seller","exclude_keywords","orientation","editorial_only","editorial_exclude","mr_release_quantity","mr_property_only","mr_property_exclude","gender","age","race","size_unit","min_width","min_height","color","dataSource","relatedTo","relatedItemId","folderId","folderName","advanced","anonymous","isolated_only","isolated_exclude","render_only","render_exclude"],resetValues:[{triggers:["query"],field:"sorting",values:[o.premiumSorting],defaultValue:"best_match"}],initialize:function(e,t){void 0===t&&(t={}),this.on("change:nudity",function(e){var i=e.changed;t.userSettings&&t.userSettings.set("SearchQuery",{nudity:i.nudity,limit:t.userSettings.get("SearchQuery").limit})}),this.searchRestrictions=new d(this.app.user.get("searchVisibility"),{app:this.app}),this.updateSearchQueryDefaults(),this.listenTo(this.searchRestrictions,"change",this.updateSearchQueryDefaults),this.on("change",this.onChange),this.on(p.prefixedArrayString("change:",this.mutable.folderQuery),this.mutateFolderSorting),this.on(p.prefixedArrayString("change:",this.mutable.query),this.mutateQuery),this.on(p.prefixedArrayString("change:",this.mutable.type),this.mutateType),this.on(p.prefixedArrayString("change:",this.mutable.related),this.mutateRelated),this.on(p.prefixedArrayString("change:",this.mutable.editorial),this.mutateEditorial),this.on(p.prefixedArrayString("change:",this.mutable.people),this.mutatePeople),this.on(p.prefixedArrayString("change:",this.mutable.sizes),this.mutateSizes),this.on(p.prefixedArrayString("change:",this.mutable.advanced),this.mutateAdvanced),this.on("change:dataSource",this.mutateCorrection)},updateSearchQueryDefaults:function(){this.secureSet(this.searchRestrictions.filterSearchAttributes(this.toJSON()))},getMetaScope:function(){var e=this.get("metaScope");return!e&&this.app.queryParams&&{}.hasOwnProperty.call(this.app.queryParams,"meta_scope")&&(e=this.app.queryParams.meta_scope),e},getRestrictions:function(){return this.searchRestrictions},getQueryParams:function(){return this.get("relatedTo")?a.pick(this.attributes,"relatedTo","relatedItemId","offset","sorting"):a.extend(a.clone(this.attributes),{metaScope:this.getMetaScope(),requestBack:!0})},onChange:function(){var e=this,t=a.omit(this.changed,["hash","offset"]);if(!a.isEmpty(t)){var i={};this.changed.offset||(i.offset=0),a.isEmpty(t)||(i.hash=void 0),this.resetValues.length&&a.each(this.resetValues,function(s){a.intersection(a.keys(t),s.triggers).length&&-1!==s.values.indexOf(e.get(s.field))&&(i[s.field]=s.defaultValue)});var s=this.app.userSettings.get("searchSession");s&&"Search"===this.app.router.routeName&&Object.assign(i,s.params),this.set(i,{silent:!0})}},mutateCorrection:function(e){e.attributes.correction=e.attributes.dataSource===e.defaults.dataSource},mutateFolderSorting:function(e){void 0===e&&(e=this),_(e.attributes)&&(e.attributes.sorting=o.folderSorting.popular)},mutateQuery:function(e){e.attributes.relatedTo=null,e.attributes.relatedItemId=0,e.attributes.offset=e.changed.offset||e.defaults.offset},mutateType:function(e){this.mutateQuery(e),e.changed.video&&(e.attributes.size_unit=e.defaults.size_unit,e.attributes.min_width=e.defaults.min_width,e.attributes.min_height=e.defaults.min_height,e.attributes.orientation=e.defaults.orientation,e.attributes.advanced=e.defaults.advanced,e.attributes.isolated_only=e.defaults.isolated_only,e.attributes.isolated_exclude=e.defaults.isolated_exclude,e.attributes.render_only=e.defaults.render_only,e.attributes.render_exclude=e.defaults.render_exclude),(e.changed.photo||e.changed.vector)&&(e.attributes.resolution=e.defaults.resolution)},mutateRelated:function(e){a.extend(e.attributes,a.omit(e.defaults,["relatedTo","relatedItemId","sorting","offset"]))},mutateAdvanced:function(e){e.changed.isolated_only&&(e.attributes.isolated_exclude=!1),e.changed.isolated_exclude&&(e.attributes.isolated_only=!1),e.changed.render_only&&(e.attributes.render_exclude=!1),e.changed.render_exclude&&(e.attributes.render_only=!1)},mutateEditorial:function(e){e.changed.editorial_only&&(e.attributes.editorial_exclude=!1),e.changed.editorial_exclude&&(e.attributes.editorial_only=!1)},mutatePeople:function(e){e.changed.mr_release_quantity&&this.calculateMutation("mr_release_quantity"),e.changed.mr_property_only&&this.calculateMutation("mr_property_only"),e.changed.mr_property_exclude&&this.calculateMutation("mr_property_exclude"),e.changed.anonymous&&this.calculateMutation("anonymous"),e.changed.gender&&this.calculateMutation("gender"),e.changed.age&&this.calculateMutation("age"),e.changed.race&&this.calculateMutation("race")},calculateMutation:function(e){if(this.attributes.video&&["mr_release_quantity","gender","age","race"].includes(e))return this.attributes.mr_property_only=!0,this.attributes.mr_property_exclude=!1,void(this.attributes.anonymous=!1);switch(e){case"mr_property_only":this.attributes.mr_property_exclude=!1,this.attributes.anonymous=!1;break;case"mr_property_exclude":this.attributes.mr_property_only=!1,this.attributes.anonymous=!1,this.attributes.mr_release_quantity=this.defaults.mr_release_quantity,this.attributes.gender=this.defaults.gender,this.attributes.age=this.defaults.age,this.attributes.race=this.defaults.race;break;case"anonymous":this.attributes.mr_property_exclude=!1,this.attributes.mr_property_only=!1,this.attributes.mr_release_quantity=this.defaults.mr_release_quantity,this.attributes.gender=this.defaults.gender,this.attributes.age=this.defaults.age,this.attributes.race=this.defaults.race}},mutateSizes:function(e){!e.changed.size_unit||e.changed.min_width||e.changed.min_height||(0!==e.attributes.min_width&&(e.attributes.min_width=this.recalculateSize(e,"min_width")),0!==e.attributes.min_height&&(e.attributes.min_height=this.recalculateSize(e,"min_height")))},clearSearchFiltration:function(){var e=["dataSource","query","sorting","photo","vector","video","nudity"],t=Object.keys(this.defaults).filter(function(t){return!e.includes(t)});this.resetToDefaults(t)},clearExtendedSearchFiltration:function(){this.resetToDefaults(a.without(a.keys(this.defaults),"dataSource","query","sorting"))},recalculateSize:function(e,t){var i=e.previous("size_unit"),s=e.attributes[t]/a.findWhere(u.rates,{key:i}).rate;return a.findWhere(u.rates,{key:e.attributes.size_unit}).rate*s},getPositionFromSize:function(e,t){return this.get(e)/a.findWhere(u.rates,{key:t||this.get("size_unit")}).rate},getSizeFromPosition:function(e,t){return a.findWhere(u.rates,{key:t||this.get("size_unit")}).rate*e},parse:function(e){var t={};return a.each(o.parseDataHandlers,function(i,s){a.has(e,s)&&i(e[s],t)}),t},isPortfolio:function(){return g(this.attributes)},isCategory:function(){return m(this.attributes)},isNewResults:function(){return"newest"===this.get("sorting")&&!this.get("query")},toQuery:function(e){void 0===e&&(e=this.attributes);var t=[];return a.each(e,function(e,i){void 0!==e&&""!==e&&t.push(i+"="+f.encodeURIComponent(e))}),t.join("&")},prepareGetParams:function(){return r({},this.attributes,{advanced:{1:1,2:0,3:2}[this.get("advanced")]})},toTracking:function(e){switch(e){case"sorting":var t=c({name:"sortings",id:this.get(e)},{app:this.app});return t&&t.label||this.get(e);case"type":var i="search";return!this.get("photo")||this.get("vector")||this.get("video")?this.get("photo")||!this.get("vector")||this.get("video")?this.get("photo")||this.get("vector")||!this.get("video")||(i="stock-footage"):i="vector-images":i="stock-photos",i;default:return""}},toFlume:function(){return a.pick(this.attributes,"effectiveParams","slicesInfo","experiments","searchDataList")},changedToTracking:function(e,t){var i=this;void 0===e&&(e=!0),void 0===t&&(t=!1);var s={category:{name:"Category",value:function(e){if(0===e)return i.app.tr("All Categories");var t=l({id:e},{app:i.app});return t&&t.name}},color:{name:"Colour",value:function(e){return e?"Yes":"No"}},editorial_exclude:{name:"Exclude Editorial",value:function(e){return e?"On":"Off"}},editorial_only:{name:"Only Editorial",value:function(e){return e?"On":"Off"}},exclude_keywords:{name:"Exclude Keywords"},orientation:{name:"Orientation",value:function(e){return{all:"All",horizontal:"Horisontal",vertical:"Vertical",square:"Sqare"}[e]}},resolution:{name:"Resolution",value:function(e){return{all:"All",1:"720p",2:"1080p",3:"4K"}[e]}},seller:{name:"Contributor"},mr_release_quantity:{name:"NumberPeople"},mr_property_exclude:{name:"PeopleExclude"},mr_property_only:{name:"PeopleOnly"},gender:{name:"Gender",value:function(e){return{female:"Female",male:"Male",both:"Male&Female"}[e]}},age:{name:"Age",value:function(e){return{baby:"Infant",child:"Child",teen:"Teenager"}[e]||e}},race:{name:"Ethnicity",value:function(e){return e}},size_unit:{name:"SizeUnit",value:function(e){return e}},min_width:{name:"MinWidth",value:function(e){return e}},min_height:{name:"MinHeight",value:function(e){return e}},advanced:{name:"Advanced",value:function(e){return{1:"Indoor",2:"All",3:"Outdoor"}[e]}},isolated_only:{name:"Isolated Only ",value:function(e){return e?"On":"Off"}},isolated_exclude:{name:"Exclude Isolated",value:function(e){return e?"On":"Off"}},render_only:{name:"Renders Only",value:function(e){return e?"On":"Off"}},render_exclude:{name:"Exclude Renders",value:function(e){return e?"On":"Off"}},anonymous:{name:"Anonymous",value:function(e){return e?"On":"Off"}}},r={};e&&(r.AutoSearch=1);var n=a.omit(this.changed,this.serviceFields);return a.each(n,function(e,n){if(s[n]&&(t||i.defaults[n]!==e)){var a=n,o=e;s[n].name&&(a=s[n].name),s[n].value&&(o=s[n].value(e)),r[a]=o}}),r},getFilterKeys:function(){return a.intersection(Object.keys(this.getNonDefaults()),this.filterFields)},defineSearchType:function(e){var t,i=!!e;return i&&this.get("editorial_only")?t="editorial":!i&&this.get("photo")&&this.get("vector")?t="allPhoto":this.get("photo")?t="photo":this.get("vector")?t="vector":this.get("video")&&(t="video"),t},defineItemsType:function(){var e=this.defineSearchType();return"allPhoto"===e?"photo":e},defineSpecificSearchMode:function(){return g(this.attributes)?"portfolio":m(this.attributes)?"category":this.get("relatedTo")},getRawSearchParams:b},{createInstance:function(e){var t=e.app,i=e.searchSessionParams,s=(e.searchRestrictions,r({},t.queryParams,{},t.userSettings.get("SearchQuery"),{},i,{},o.getDataSourceSets(t),{rawSearchParams:b(t.queryParams)}));return Object.assign(s,function(e){return!e.sorting&&m(e)?o.categoryDefaults:!e.sorting&&g(e)?o.portfolioDefaults:_(e)?{sorting:o.folderSorting.popular}:void 0}(s)),new v(s,{app:t,userSettings:t.userSettings,parse:!0})}});e.exports=v},507:function(e,t,i){"use strict";var s=i(0),r=i(4);e.exports=r.extend({defaults:{photo:!0,vector:!0,video:!0,editorial:!0},getQueryParams:function(){return{}},filterSearchAttributes:function(e){var t=s.clone(e);return e.photo||e.vector||e.video||(e.photo=!0,e.vector=!0),this.get("editorial")||(t.editorial=void 0,t.editorial_only=!1,t.editorial_exclude=!1),t.photo=e.photo&&this.get("photo"),t.vector=e.vector&&this.get("vector"),t.video=e.video&&this.get("video"),t.photo||t.vector||t.video||(t.photo=this.get("photo"),t.photo||(t.vector=this.get("vector")),t.photo||t.vector||(t.video=this.get("video"))),t.photo===e.photo&&t.vector===e.vector&&t.video===e.video&&t.editorial===e.editorial&&t.editorial_exclude===e.editorial_exclude&&t.editorial_only===e.editorial_only||(t.hash=void 0),t}})},508:function(e,t,i){"use strict";(function(t){function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=i(0),a=i(16),o=a.searchBarTypes,l=a.searchBarPlaceholders,c=i(530),u=i(496),h=i(501),d=i(20).prefixedArrayString;e.exports=u.extend({name:"SearchTypes",el:!1,collection:null,events:{"change ._search-type":"onTypeChange","click ._active-type":"onActiveTypeClick"},globals:{"scroll window":"onWindowScroll"},initialize:function(){this.prepareTypes(),this.listenTo(this.model,d("change:",this.model.mutable.type),this.onModelTypeChange),this.listenTo(this.app.observer,"Responsive:CloseMobileMenu",this.observeCloseMobileMenu.bind(this)),this.listenTo(this.app.observer,"SearchFilter:ResetType",this.setTypeFilterRestriction.bind(this)),this.listenTo(this.app.observer,"Modal:HideAll",this.toggle.bind(this,!1))},serialize:function(){var e=this.getActiveOption();return{options:this.typeOptions,label:e.label,icon:e.icon}},prepareTypes:function(){var e=this,t=!1;this.uniqueTypes=[],this.typeOptions=c.filter(function(t){var i=!0;return t.type.forEach(function(t){i=i&&e.model.getRestrictions().get(t)}),i}).map(function(i){var n,a,c=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(i,!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},i),u=!0;(i.type.forEach(function(t){u=u&&e.model.get(t)}),u&&!t&&(c.active=!0,t=!0),(n=e.uniqueTypes).includes.apply(n,c.type))||(a=e.uniqueTypes).push.apply(a,c.type);return c.label=o.find(function(e){return e.type===c.labelKey}).label,c.placeholder=l.find(function(e){return e.type===c.labelKey}).label,c.placeholderMobile=l.find(function(e){return"mobile"===e.type}).label,c}),t||(this.typeOptions[0].active=!0)},getActiveOption:function(){return n.findWhere(this.typeOptions,{active:!0})},onTypeChange:function(e){var t=this.getActiveOption(),i=parseInt(e.target.value,10);t.id!==i&&(t.active=!1,(t=n.findWhere(this.typeOptions,{id:i})).active=!0,this.render(),this.setTypeFilterRestriction(),this.app.observer.broadcast("Track:UE:SearchTypes:Change",{type:t.type}),this.onSearchTypesChangeCallback(this.makeHash(t.type)))},onActiveTypeClick:function(e){e.stopPropagation(),this.toggle(!1)},onModelTypeChange:function(){this.prepareTypes(),this.render()},onWindowScroll:n.throttle(function(){t.browser&&h.mobileMode()&&this.isOpen()&&this.toggle(!1)},10),makeHash:function(e){var t={};return n.each(this.uniqueTypes,function(i){t[i]="object"==typeof e?n.contains(e,i):e===i}),t},toggle:function(e){void 0===e&&(e=!this.isOpen());var t=e?!this.isOpen():!!e;h.mobileMode()&&e&&this.app.observer.fire("Responsive:CloseMobileMenu",{cid:this.cid}),this.$(".search-bar-type__menu").toggleClass("search-bar-type__menu_opened",t),this.$(".search-bar-type-indicator__arrow").removeClass("arrow-top arrow-bottom").addClass("arrow-"+(t?"top":"bottom"))},isOpen:function(){return this.$(".search-bar-type__menu").hasClass("search-bar-type__menu_opened")},setTypeFilterRestriction:function(){this.app.userSettings.set({searchSession:{route:this.app.router.routeName,params:{typeFilterRestriction:1}}})},observeCloseMobileMenu:function(e){e.cid!==this.cid&&this.toggle(!1)},onSearchTypesChangeCallback:n.noop})}).call(this,i(17))},509:function(e,t,i){"use strict";var s=i(0),r=i(25);e.exports=r.extend({url:"SearchHints",initialize:function(e,t){t&&t.url&&(this.url=t.url)},parse:function(e,t){var i=this.getQueryParams?s.result(this,"getQueryParams").requestId:void 0;return t.requestId===i&&e.hints||[]},isBulkAllowed:function(){return!1}})},510:function(e,t,i){"use strict";(function(t){i(511);var s=i(13),r=i(66),n=i(504),a=i(512),o=i(513),l=i(514),c=i(496),u=i(503),h=i(515),d=i(508),p=i(509),f=i(531),m=i(501);e.exports=c.extend({name:"SearchBar",el:!1,template:n,amp:a,pageType:null,features:null,enableNavigate:!0,mobileMode:!1,autoFocus:!1,isStaticHints:!0,hintsCustomCssClass:"",events:{"click ._search-types":"onTypesSelectorClick","click ._reset":"onResetButtonClick","keydown ._input":"onInputKeyDown","click ._submit":"onSubmitButtonClick","submit ._search-form":"onSubmit","input ._input":"onInputInput","focus ._input":"onInputFocus","blur ._input":"onInputBlur","click ._input":"onInputClick","click ._action-back":"onActionBackClick","click ._filters-btn":"onFiltersButtonClick"},globals:{click:"onBodyClick","resize window":"onWindowResize"},initialize:function(){var e=this;this.model=this.app.store.get("SearchQuery"),this.setViews({"._search-types":new d({template:o,model:this.model,app:this.app,onSearchTypesChangeCallback:this.onSearchTypesChange.bind(this)})}),!this.app.device.isMobile&&this.app.features.isFeatureOnValue("Search by image")&&this.setViews({"._search-images":new h({app:this.app})}),this.listenTo(this.model,"change paramsArrived",function(){e.getView("._search-types").prepareTypes(),e.render()}),this.listenTo(this.model,"change:query",this.onQueryChange)},prepareRender:function(){this.mobileMode=this.app.device.isMobile||(t.browser?m.mobileMode():this.mobileMode)},serialize:function(){return{placeholder:this.getPlaceholder(),query:this.model.get("query").replace(/-/gim," "),searchLink:this.app.makeUrl("search"),filtersButtonAvailable:this.isFiltersButtonAvailable(),activeMobileFilters:this.getActiveMobileFilters(),mobileMode:this.mobileMode}},onQueryChange:function(){if(this.enableNavigate){var e=this.model.prepareGetParams();""===e.query&&r.pagesDefaultQuery[this.pageType]&&(e.query=r.pagesDefaultQuery[this.pageType]),r.pagesDefaultSorting[this.pageType]&&(e.sorting=r.pagesDefaultSorting[this.pageType]),this.app.router.redirect(this.app.makeUrl({route:"Search",query:e.query,sorting:e.sorting,photo:e.photo,vector:e.vector,video:e.video}))}},clientAfterRender:function(){this.setNotExistView("SearchHints",u,{type:"search",template:l,collection:new p,onHintMouseDownCallback:this.chooseHint.bind(this),onHintSelectCallback:this.fillInputValue.bind(this),customCssClass:this.hintsCustomCssClass,isStatic:this.isStaticHints&&!this.isSearchPage,isFixed:this.isSearchPage,shift:{top:7,left:17,width:-16}}).setAnchor(this.$("._params")[0]),f(this.$el,s.$),this.autoFocus&&!m.mobileMode()&&""===this.model.get("query")&&this.focusOnInput(),this.app.userSettings.get("Tour")&&this.app.userSettings.get("Tour").searchByImage||this.app.observer.fire("Tour:Start",{name:"searchByImage"}),this.$el.addClass("enable-transition")},onBodyClick:function(e){var t=this.getView("._search-types"),i=this.getView("SearchHints");!this.el.getElementsByClassName("_search-types")[0].contains(e.target)&&t&&t.isOpen()&&(t.toggle(!1),this.removeHighlight());var s=this.mobileMode&&this.el.getElementsByClassName("_input")[0].contains(e.target)&&i&&!i.opened;this.el.getElementsByClassName("_search-hints")[0].contains(e.target)||s||this.hideHints()},isSearchFieldEmpty:function(){return!this.$("._input").val().trim().length},isFiltersButtonAvailable:function(){return t.browser&&m.mobileMode()&&this.isSearchPage&&this.mobileMode&&!["similar","serie","model"].includes(this.model.get("relatedTo"))&&!this.model.get("folderId")>0},onSubmitButtonClick:function(e){this.isSearchFieldEmpty()&&(this.$("._input").focus(),e.preventDefault())},onFiltersButtonClick:function(){this.app.observer.fire("Search:ToggleMobileFilter")},trackBarSubmit:function(e){this.app.observer.broadcast("Track:UE:SearchBar:Submit",{query:e,type:this.getActiveOption().labelKey})},onSubmit:function(e){e.preventDefault();var t=this.$("._input").val().trim();0!==t.length&&(this.trackBarSubmit(t),this.model.secureSet({query:t,correction:!0}),this.enableNavigate&&!1===this.model.hasChanged()&&this.model.trigger("change:query",this.model))},onTypesSelectorClick:function(){this.setHighlight(),this.getView("._search-types").toggle()},onInputInput:function(e){this.toggleClearButton(!!e.target.value),this.getView("SearchHints").load(e.target.value)},onInputFocus:function(){this.setHighlight()},onInputBlur:function(){this.removeHighlight()},onInputClick:function(e){this.mobileMode&&this.getView("SearchHints").load(e.target.value)},onActionBackClick:function(){this.app.observer.fire("SearchBar:Back")},setHighlight:function(){this.$el.addClass("focus")},removeHighlight:function(){this.$("._input").is(":focus")||this.$el.removeClass("focus")},onInputKeyDown:function(e){switch(e.which){case 38:case 40:e.preventDefault(),this.getView("SearchHints").moveSelection(38===e.which?-1:1);break;case 13:e.preventDefault(),this.isSearchFieldEmpty()||this.chooseHint();break;case 27:this.hideHints()}},onResetButtonClick:function(){this.$("._input").val(""),this.toggleClearButton(!1),this.hideHints(),this.focusOnInput()},onSearchTypesChange:function(e){this.model.secureSet(Object.assign(e,{query:this.$("._input").val().trim(),correction:!0})),this.updatePlaceholder()},onWindowResize:function(){var e=t.browser?m.mobileMode():this.mobileMode;e!==this.mobileMode&&(this.mobileMode=e,this.updatePlaceholder())},getActiveMobileFilters:function(){var e=this.model.filterFields.concat(["nudity"]).filter(function(e){return"dataSource"!==e});return Object.keys(this.model.getNonDefaults(e)).length+(this.getActiveOption().isDefault?0:1)},getActiveOption:function(){return this.getView("._search-types").getActiveOption()},getPlaceholder:function(){var e=this.app.device.isMobile||this.mobileMode?"placeholderMobile":"placeholder";return this.tr(this.getActiveOption()[e])},updatePlaceholder:function(){this.getView("._search-types")&&this.$("._input").attr({placeholder:this.getPlaceholder()})},chooseHint:function(){var e=this.$("._input").val().trim(),t=this.getView("SearchHints").getSelectedItem();t?(this.app.observer.broadcast("Track:UE:SearchHint:Select",{value:t.get("value"),query:this.$("._input").val().trim(),position:this.getView("SearchHints").collection.indexOf(t)+1}),this.$("._input").val(t.get("value"))):this.trackBarSubmit(e),this.model.secureSet({query:e,correction:!0}),this.hideHints()},fillInputValue:function(e){this.$("._input").val(e)},toggleClearButton:function(e){this.$("._reset").toggleClass("search-bar-input__button-reset_hidden",!e)},hideHints:function(){this.getView("._search-types")&&this.getView("SearchHints").reset()},focusOnInput:function(){var e=this.$("._input");if(e.trigger("focus"),e[0].setSelectionRange){var t=e.val().length;e[0].setSelectionRange(t,t)}else e.val(e.val());document.body.scrollTop=0}})}).call(this,i(17))},511:function(e,t,i){},512:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="search-bar-wrapper"><div class="search-bar"><form class="search-bar__inner _search-form" action="'+e.searchLink+'" target="_top"><div class="search-bar__params _params"><div class="search-bar__actions"><div role="button" tabindex="0" class="search-bar__action-back _action-back" on="tap:search-bar.hide, header-overlay.show"></div></div><div class="search-bar__input-container search-bar-input"><div class="search-bar-input__input-box input-box-l"><input name="query" class="input search-bar-input__input-query input-l _input" type="text" value="'+t(unescape(e.query))+'" placeholder="'+t(e.placeholder)+'" autocomplete="off" required /><a class="search-bar-input__button-reset button-reset _reset';return e.query.length||(i+=" search-bar-input__button-reset_hidden"),i+='"></a></div></div><div class="search-bar__search-images _search-images"></div></div><div class="search-bar__control"><button type="submit" class="search-bar__button-submit button button-blue button-search button-search-mobile search-bar__mobile _submit"></button></div></form></div></div>'}},513:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="search-bar-type__container"><span class="search-bar-type__indicators search-bar-type-indicator"><i class="search-bar-type-indicator-hover"></i><i class="icon search-bar-type-indicator__icon';e.icon&&(i+=" search-bar-type-indicator__icon-type "+t(e.icon)),i+='"></i><span class="search-bar-type-indicator__title',e.icon||(i+=" search-bar-type-indicator__title_all"),i+='">'+this.tr(e.label)+'</span><i class="arrow arrow-black search-bar-type-indicator__arrow arrow-bottom"></i></span><div class="search-bar-type__menu"><ul class="search-bar-type-menu">';var s=e.options;if(s)for(var r,n=-1,a=s.length-1;n<a;)"video"===(r=s[n+=1]).type&&n>0&&(i+='<li class="search-bar-type-menu__separator"></li>'),i+='<li class="search-bar-type-menu__item',r.active&&(i+=" search-bar-type-menu__item_active _active-type"),i+='"><label class="search-bar-type-menu__item-inner',r.parent&&(i+=" search-bar-type-menu__item-inner_sub"),i+='"><i class="search-bar-type-menu__item-ok icon icon-ok icon-ok-blue"></i><input class="search-bar-type-menu__item-radio _search-type" type="radio" name="file-types" value="'+t(r.id)+'" /><i class="search-bar-type-menu__item-icon icon',r.icon?i+=" "+t(r.icon):i+=" icon-all-types",i+='"></i><span class="search-bar-type-menu__item-title">'+this.tr(r.label)+"</span></label></li>";return i+='<li class="search-bar-type-menu__item search-bar-type-menu__item_apply"><span class="search-bar-type-menu__apply">'+this.tr("Apply")+"</span></li></ul></div></div>"}},514:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<ul class="'+t(e.classes)+' _search-hints">',s=e.items;if(s)for(var r,n=-1,a=s.length-1;n<a;)(r=s[n+=1]).value&&(i+='<li class="search-hints__item _hint',r.selected&&(i+=" hint_active"),i+='" data-value="'+t(r.value)+'"><span class="search-hints__item-text"><span class="search-hints__item-text_main">'+t(e.query.trim())+"</span>"+t(r.cutValue)+"</span></li>");return i+="</ul>"}},515:function(e,t,i){"use strict";(function(e){i(499);var t=i(498).SearchByImageIcon,s=i(516),r=i(517),n=i(496),a=i(518),o=i(497),l=(0,i(6).getLogger)(e);e.exports=n.extend({name:"SearchByImage",el:!1,template:s,events:{click:"onClick",mouseenter:"showImageSearchToolTip",mouseleave:"hideImageSearchToolTip"},clientAfterRender:function(){try{localStorage.removeItem("imgData")}catch(e){l.verbose("There is a problem with local storage",e)}this.setNotExistView("searchByImageToolTip",o,{params:t,content:new n({el:!1,template:r})})},showImageSearchToolTip:function(e){this.getView("searchByImageToolTip").show(e)},hideImageSearchToolTip:function(e){this.getView("searchByImageToolTip").hide(e)},onClick:function(e){e.stopPropagation(),this.getView("SearchByImage")||this.setView("SearchByImage",new a({app:this.app})),this.getView("SearchByImage").show()}})}).call(this,i(3)(e))},516:function(e,t,i){"use strict";e.exports=function(e){return'<i class="search-bar__search-images-icon icon-search-by-image _search-images-icon"></i>'}},517:function(e,t,i){"use strict";e.exports=function(e){return"<div>"+this.tr("Try our new Search by Image!")+"</div>"}},518:function(e,t,i){"use strict";var s=i(0),r=i(519),n=i(532),a=i(520),o=i(528);e.exports=n.extend({template:r,initialize:function(){var e=this;this.model=new o,this.body=function(){return new a({app:e.app,model:e.model,onSearchByImageChange:e.onSearchByImageChange.bind(e),onSubmitDataCallback:e.onSubmitData.bind(e)})},this.footer=[],this.finishDelay=Math.floor(1500*Math.random())+1e3,this.delayCompleted=!0,this.delayCallback=null,this.listenTo(this.model,"sync",this.modelSyncCallback),this.listenTo(this.model,"invalid",this.modelInvalidCallback),this.listenTo(this.model,"serverError",this.modelServerErrorCallback)},onHideCallback:function(){this.model.abort(),this.model.resetToDefaults(s.without(s.keys(this.model.defaults),["searchType"]))},toggleLockUI:function(e){this.$("._tab, ._btn").prop("disabled",e||!1)},onSearchByImageChange:function(e){this.model.secureSet(e)},onSubmitData:function(e){var t=this;this.finishDelay&&(this.delayCompleted=!1,this.delayCallback=null,s.delay(function(){t.delayCallback&&(t.delayCallback(),t.delayCallback=null),t.delayCompleted=!0},this.finishDelay)),this.toggleLockUI(!0),this.model.save({file:e},{wait:!0})},modelServerErrorCallback:function(e,t,i){var s=i.responseJSON?this.handleErrors(i.responseJSON):this.parseBadResponse(i);this.model.trigger("invalid",this.model,s)},modelInvalidCallback:function(){this.toggleLockUI(!1)},modelSyncCallback:function(){this.delayCompleted?this.finishLoading():this.delayCallback=this.finishLoading.bind(this)},finishLoading:function(){var e=this;this.app.observer.fire("Search:imageLoaded"),this.app.observer.broadcast("Track:UE:Search:ByImage",{source:this.model.get("url")||"upload"}),this.toggleLockUI(!1),s.delay(function(){e.app.router.redirect(e.app.makeUrl("search/by-images",{query:{idList:e.model.getItemsList(),mode:e.model.get("searchType"),imageUrl:e.model.get("url")}}))})},handleErrors:function(e){var t=[];return s.each(e.errors,function(i){t.push(this.tr(i.message,e.meta.format||[]))},this),t},parseBadResponse:function(e){return s.map(e,function(e,t){return t+": "+e})}})},519:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="modal-container"><div class="sbi-modal modal _modal '+t(e.modalClasses)+'">';return e.noBorder||(i+='<div class="modal__border"></div>'),i+='<div class="modal__dialog"><div class="modal__header sbi-modal__title _drag-handler">'+this.tr("Search by Image")+'</div><div class="modal__body sbi-modal__body _body '+t(e.bodyClasses)+'">\x3c!--body mount--\x3e</div></div></div></div>'}},520:function(e,t,i){"use strict";i(499);var s=i(0),r=i(16).searchImagesTabs(),n=i(521),a=i(522),o=i(65),l=i(496),c=i(502),u=i(523),h=i(526),d=i(67);e.exports=l.extend({el:!1,template:n,events:{"click ._btn":"onBtnClick","submit ._submit":"onSubmit"},initialize:function(){this.listenTo(this.model,"change:searchType",this.render)},prepareRender:function(){var e=d.get("10_uploadByImageTab");e&&e!==this.model.get("searchType")&&(this.model.set({searchType:e},{silent:!0}),this.app.userSettings.set({uploadByImageTab:e})),this.setViews({"._search-images-tabs":new c({app:this.app,template:a,model:this.model,schema:this.setTabsActive(),changeTabCallback:this.changeTabCallback.bind(this)}),"._upload-block":new("url"===this.model.get("searchType")?u:h)({app:this.app,model:this.model,onSearchByImageChange:this.onSearchByImageChange.bind(this),onSubmitDataCallback:this.onSubmitDataCallback.bind(this)})})},onSubmit:function(e){e.preventDefault(),e.stopPropagation(),this.doUpload()},onBtnClick:function(e){e.preventDefault(),e.stopPropagation(),this.doUpload()},setTabsActive:function(){var e=this;return s.map(r,function(t){return t.active=e.model.get("searchType")===t.key,t})},changeTabCallback:function(e){var t=e.get("key");this.model.resetToDefaults(s.without(s.keys(this.model.defaults),"searchType")),this.onSearchByImageChange({searchType:t}),this.app.userSettings.set({uploadByImageTab:t}),d.set("10_uploadByImageTab",t,{expires:"1Y"})},serialize:function(){return{btnName:this.tr("url"===this.model.get("searchType")?o.SearchByImageTitle:o.SearchImagesTitle)}},doUpload:function(){this.model.resetToDefaults(s.without(s.keys(this.model.defaults),"searchType")),this.getView("._upload-block").upload()},onSearchByImageChange:s.noop,onSubmitDataCallback:s.noop})},521:function(e,t,i){"use strict";e.exports=function(e){return'<div class="sbi-uploader"><div class="sbi-uploader__tab-switcher _search-images-tabs"></div><div class="sbi-uploader__form _upload-block"></div><div class="sbi-uploader__footer"><button class="button button-xxl button-pill button-blue _btn">'+("undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}())(e.btnName)+'</button></div><i class="sbi-uploader__close icon icon-close-cross _close"></i></div>'}},522:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<ul class="cmp-tabs">',s=e.scheme;if(s)for(var r,n=-1,a=s.length-1;n<a;)(r=s[n+=1]).enabled&&(i+='<li class="cmp-tabs__tab ',r.active&&(i+="cmp-tabs__tab_active"),i+=' _tab" data-key='+t(r.key)+'><a class="cmp-tabs__label">'+this.tr(r.label)+"</a></li>");return i+="</ul>"}},523:function(e,t,i){"use strict";var s=i(0),r=i(524),n=i(541),a=i(542).spinner,o=i(496),l=i(500);e.exports=o.extend({el:!1,template:r,regexpUrl:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/gi,events:{"input ._url_input":"onInput"},globals:{click:"onGlobalClick"},initialize:function(){this.spinner=null,this.setViews({"._upload-errors":new l({model:this.model})}),this.listenTo(this.model,"invalid",this.onInvalidAppear),this.listenTo(this.app.observer,"Search:imageLoaded",this.finishLoading)},serialize:function(){return s.clone(this.model.attributes)},clientAfterRender:function(){this.$("._url_input").focus()},onGlobalClick:function(e){this.$(e.target).hasClass("_url_input")?this.clearError():this.$("._url_input").blur()},onInput:function(){this.clearError()},onInvalidAppear:function(){this.finishLoading(),this.$("._url_input-container").addClass("field-box_incorrect")},clearError:function(){this.$("._url_input-container").removeClass("field-box_incorrect"),this.getView("._upload-errors").setErrorMessages()},upload:function(){var e=this.$("._url_input").val();this.checkUrl(e)?(this.onSearchByImageChange({url:e}),this.model.isValid()&&(this.onSubmitDataCallback(),this.loading())):this.$("._url_input-container").addClass("field-box_incorrect")},checkUrl:function(e){return e.match(this.regexpUrl)},loading:function(){this.spinner||(this.spinner=new n(a),this.spinner.spin(this.$("._sbi-spinner").get(0))),this.$("._form-container").hide(),this.$("._sbi-spinner").show()},finishLoading:function(){this.$("._form-container").show(),this.$("._sbi-spinner").hide()},onSearchByImageChange:s.noop,onSubmitDataCallback:s.noop})},524:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<form name="UploadByUlr" class="sbi-form sbi-form_url _submit" method="POST" enctype="multipart/form-data"><div class="_sbi-spinner"></div><div class="_form-container"><span class="sbi-form__title">'+this.tr("Paste image URL")+'</span><label class="sbi-form__field field-box input-box _url_input-container input-box-xxl"><input class="input input-xxl _url_input" type="text" name="title"';return e.url&&(i+=' value="'+t(e.url)),i+='" autocomplete="off" /></label><div class="sbi-uploader__errors _upload-errors"></div></div></form>'}},525:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i="",s=e.errorMessages;if(s)for(var r=-1,n=s.length-1;r<n;)i+='<span class="sbi-form__text sbi-form__text_error">'+t(s[r+=1])+"</span>";return i}},526:function(e,t,i){"use strict";(function(e){var t=i(0),s=i(13),r=i(65),n=i(527),a=i(496),o=i(500),l=(0,i(6).getLogger)(e);e.exports=a.extend({el:!1,template:n,events:{"change ._file-upload":"onFileChange","click ._upload":"upload","drop ._upload":"onPreviewDrop","dragleave ._upload":"onPreviewDragLeave","dragover ._upload":"onPreviewDragOver"},initialize:function(){this.setViews({"._upload-errors":new o({model:this.model})}),this.listenTo(this.app.observer,"Search:imageLoaded",this.finishLoading)},serialize:function(){return t.clone(this.model.attributes)},clientAfterRender:function(){this.getView("._upload-errors").setErrorMessages(),this.imageRate&&this.previewResizing(),t.defer(this.onPreviewLoad.bind(this))},onFileChange:function(e){e.target.files.length>0&&this.prepareFile(e.target.files[0])},onPreviewDragOver:function(e){e.preventDefault(),e.stopPropagation(),this.toggleUpload(!0)},onPreviewDragLeave:function(e){e.preventDefault(),e.stopPropagation(),this.toggleUpload()},onPreviewDrop:function(e){e.preventDefault(),e.stopPropagation(),this.toggleUpload(),e.originalEvent.dataTransfer.files.length>0&&this.prepareFile(e.originalEvent.dataTransfer.files[0])},toggleUpload:function(e){this.$("._upload").toggleClass("dragged",e||!1)},onPreviewLoad:function(){this.$("._round-loader").addClass("cmp-round-loader_active")},finishLoading:function(){this.$("._round-loader").removeClass("cmp-round-loader_active").addClass("cmp-round-loader_finish"),this.$("._img-loader").addClass("cmp-img-loader_stop")},previewResizing:function(){var e=this.$(".sbi-form__drop-zone-preview"),t=e.width()/e.height();this.imageRate>t?this.$("._preview").attr("width",Math.round(e.width())):this.$("._preview").attr("height",Math.round(e.height()))},upload:function(){this.$("._file-upload").trigger("click")},prepareFile:function(e){if(this.onSearchByImageChange(t.pick(e,["size","type"])),this.model.isValid()){this.file=e;var i=new FileReader;i.onload=this.imageIsLoaded.bind(this),i.onerror=this.onImageError.bind(this),i.readAsDataURL(e)}},readerLoad:function(e){this.fileReader||(this.fileReader=new FileReader),this.fileReader.onload=e?this.loadBlank.bind(this):this.imageIsLoaded.bind(this),this.fileReader.onerror=this.onImageError.bind(this),this.fileReader.readAsDataURL(this.file)},loadBlank:function(){this.model.set({blank:!0}),this.setImageRate({target:this.$("._upload").get(0)})},imageIsLoaded:function(e){var t=e.target.result,i=t.split(":")[1];if(t&&i.length){var r=new Image;s.$(r).hide(),this.$el.prepend(r),this.onSearchByImageChange({fileData:t}),r.id="searchingImg",r.src=t,r.onload=this.setImageRate.bind(this),r.onerror=this.onImageError.bind(this)}else this.onImageError()},setImageRate:function(e){this.onSearchByImageChange(t.pick(e.target,["width","height"])),this.model.isValid()&&(this.imageRate=e.target.width/e.target.height,this.onSubmitDataCallback(this.file),this.render())},onImageError:function(){-1!==t.indexOf(["image/tiff","image/tif"],this.model.get("type"))?(this.onSearchByImageChange({fileData:void 0}),this.readerLoad(!0)):this.model.trigger("invalid",this.model,[this.tr(r.ErrorTryAgain)])},createThumb:function(e){try{localStorage.setItem("imgData",this.getBase64Image(e))}catch(e){l.verbose("There is a problem with local storage",e)}},getBase64Image:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),s={};return s.width=this.imageRate>=1?Math.round(30*this.imageRate):30,s.height=this.imageRate>=1?30:Math.round(30/this.imageRate),t.width=s.width,t.height=s.height,i.drawImage(e,0,0,s.width,s.height),t.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")},onSearchByImageChange:t.noop,onSubmitDataCallback:t.noop})}).call(this,i(3)(e))},527:function(e,t,i){"use strict";e.exports=function(e){var t='<form name="UploadByImage" class="sbi-form sbi-form_file _submit" method="POST" enctype="multipart/form-data">';return e.fileData||e.blank?(t+='<div class="sbi-form__drop-zone-preview ',e.blank&&(t+="blank"),t+='"><div class="sbi-form__overlay _preview-overlay"></div><i class="sbi-form__loader cmp-img-loader _img-loader"><i class="cmp-img-loader__icon"></i><i class="cmp-img-loader__icon"></i><i class="cmp-img-loader__icon"></i></i><i class="sbi-form__round-loader cmp-round-loader _round-loader"><i class="cmp-round-loader__part cmp-round-loader__part_1"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_2"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_3"><i class="cmp-round-loader__inner"></i></i><i class="cmp-round-loader__part cmp-round-loader__part_4"><i class="cmp-round-loader__inner"></i></i></i>',e.fileData&&(t+='<img class="sbi-form__preview _preview" src="'+e.fileData+'" />'),t+="</div>"):t+='<div class="sbi-form__drop-zone _upload"><i class="sbi-form__icon"></i><span class="sbi-form__text">'+this.tr("Drag and drop image here")+"</span></div>",t+='<div class="sbi-uploader__errors _upload-errors"></div><span class="sbi-form__text sbi-form__text_or">'+this.tr("or")+'</span><input class="sbi-form__field-file _file-upload" type="file"></form>'}},528:function(e,t,i){"use strict";var s=i(0),r=i(7),n=i(529),a=i(4),o=i(12);e.exports=a.extend({defaults:n.defaults,limits:n.limits,validation:n.validation,oldSync:!0,prepareUrl:function(e){return r.client.msisUrl+"/search"+(e?"/"+e:"")},sync:function(e,t,i){var r=this;void 0===i&&(i={}),this.get("url")?(i.data={url:o.encodeURI(this.get("url"))},i.url=this.prepareUrl("url"),i.emulateJSON=!0):(i.data=new FormData,i.data.append("file",this.get("file")),i.url=this.prepareUrl(),i.contentType=!1);var n=i.error||function(){};return i.error=function(e){r.trigger("serverError",r,e,s.pick(e,["status","statusText","responseJSON"]));for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];n.apply(void 0,[e].concat(i))},this.xhr=Backbone.sync.call(this,e,t,i),this.xhr},getItemsList:function(){return JSON.stringify(s.map(this.get("items"),function(e){return e.id}))},abort:function(){this.xhr&&this.xhr.readyState>0&&this.xhr.readyState<4&&this.xhr.abort()},parse:function(e){return e.errors&&(this.validationError=e.errors,this.trigger("invalid",this,e.errors,{validationError:e.errors})),e.data}})},529:function(e,t,i){"use strict";e.exports.defaults={fileData:void 0,file:void 0,url:void 0,size:10485760,type:"image/jpg",width:10,height:10,searchType:"url",items:[]},e.exports.limits={size:[10],minResolution:[10,10],maxResolution:[1e4,1e4]},e.exports.validation={size:{max:10485760,msg:"ErrorMaxSize"},type:{oneOf:["image/jpeg","image/jpg","image/png","image/bmp","image/tif","image/tiff"],msg:"ErrorImageFormat"},width:[{min:10,msg:"ErrorMinWidth"},{max:1e4,msg:"ErrorMaxWidth"}],height:[{min:10,msg:"ErrorMinHeight"},{max:1e4,msg:"ErrorMaxHeight"}]}},530:function(e,t,i){"use strict";e.exports=[{id:1,type:["photo","vector"],labelKey:"allPhoto",isDefault:!0},{id:2,type:["photo"],labelKey:"photo",icon:"icon-photo"},{id:3,type:["vector"],labelKey:"vector",icon:"icon-vector"},{id:4,type:["video"],labelKey:"video",icon:"icon-video"}]},538:function(e,t,i){"use strict";var s=i(0),r=i(4);e.exports=r.extend({url:"CartIndicator",defaults:{action:null,actionId:null,count:0},initialize:function(e,t){this.listenTo(this.app.observer,"Cart:add",this.addToCart),this.listenTo(this.app.observer,"Cart:remove",this.removeFromCart),t&&t.fetch&&this.fetch()},getQueryParams:function(){return s.pick(this.attributes,"action","actionId")},addToCart:function(e){var t=this;return this.save({action:"add",actionId:e.fileId}).then(function(){t.app.observer.fire("Cart:added",{fileId:s.isArray(e.fileId)?e.fileId:[e.fileId]})})},removeFromCart:function(e){var t=this;return this.save({action:"remove",actionId:e.fileId}).then(function(){t.app.observer.fire("Cart:removed",{fileId:s.isArray(e.fileId)?e.fileId:[e.fileId]})})}})},576:function(e,t,i){"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=i(16).validationMessages,a=i(4),o=i(33),l=n.find(function(e){return"required"===e.key}).label,c=a.extend({defaults:{contentId:null,img:""},parse:function(e){return{contentId:null,img:e}}}),u=a.extend({defaults:{id:null,name:""}}),h=a.extend({defaults:{id:null,link:""}});e.exports=o.extend({url:"Category",defaults:{id:null,parentId:null,name:"",seller:{},depositItem:{},position:null,description:"",thumb:{},thumbLarge:{}},validation:{name:function(e){return e?null:{message:l,field:"name"}},seller:function(e){return e.get&&!e.get("id")?{message:l,field:"seller_id"}:null},depositItem:function(e){return e.get&&!e.get("id")?{message:l,field:"depositItem_id"}:null}},relations:{seller:u,depositItem:h,thumb:c,thumbLarge:c},getQueryParams:function(){return this.serialize()},parse:function(e,t){var i=e.data;return i?function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(i,!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},i,{},this.experimentalTrueParseRelations(i,t)):{}}})},578:function(e,t,i){"use strict";var s=i(0),r=i(38).getCategories,n=i(16),a=i(4),o=i(25),l=i(20);e.exports=o.extend({url:"TopKeywords",model:a,type:"photo",initialize:function(e,t){this.type=t.type||this.type},getQueryParams:function(){return{lang:this.app.lang,type:this.type}},parse:function(e){return e.result&&e.result.length?this.prepareKeywords(e.result):this.getDefaultKeywords()},serialize:function(){if("categories"===this.type)return this.getCategoriesKeywords();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o.prototype.serialize.apply(this,t)},prepareKeywords:function(e){var t=this;return s.each(e,function(e){e.url=t.makeKeywordUrl(e.name.replace(/\s/g,"-"))}),s.sortBy(e,function(e){return e.rate})},getDefaultKeywords:function(){var e=this,t=s.clone(n["ceoPopReq"+l.capitalize(this.type)]);return s.map(t,function(t){var i=e.app.translator.tr(t.name);return{name:i,url:e.makeKeywordUrl(i)}})},getCategoriesKeywords:function(){var e=this;return r(this.app).map(function(t){return{name:t.name,url:e.app.makeUrl({route:"Search",category:t.id},{protocol:e.app.parsedUrl.protocol})}})},makeKeywordUrl:function(e){return this.app.makeUrl({route:"Search",pageType:this.type,keywordName:e,offset:"",hash:""},{protocol:this.app.parsedUrl.protocol})}})},583:function(e,t,i){},584:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<form class="signup-user-fields" method="POST" action="'+this.app.makeUrl("signup",{protocol:"https:",backURL:!0})+'" id="SignupUser" name="SignupUser" autocomplete="off"><label class="signup-user-fields__field field-box field-box_light field-box_rounded field-box_large input-box input-box-4xl _email-field"><input class="input input-4xl';return e.fieldData.email||(i+=" empty"),i+=' _field" type="text" name="email"value="',e.fieldData.email&&(i+=""+t(e.fieldData.email)),i+='" autocomplete="email" /><span class="field-box__title">'+this.tr("E-mail")+' *</span></label><label class="signup-user-fields__field field-box field-box_light field-box_rounded field-box_large input-box input-box-4xl"><input class="input input-4xl',e.fieldData.password||(i+=" empty"),i+=' _field _password" type="password"name="password" autocomplete="new-password" /><span class="field-box__title">'+this.tr("Password")+' *</span></label><div class="signup-user-fields__captcha g-recaptcha _captcha',e.captcha.show&&(i+=" signup-user-fields__captcha_visible"),i+='" data-sitekey="'+t(e.captcha.siteKey)+'"></div>',e.submitButton&&(i+='<div class="signup-user-fields__action"><button class="signup-user-fields__signup-button button button-xxxl button-green _submit" type="submit" form="SignupUser">'+this.tr("Register Account")+"</button></div>"),i+="</form>"}},586:function(e,t,i){"use strict";i(587);var s=i(0),r=i(16).keywordsTitles,n=i(588),a=i(534),o=i(496);e.exports=o.extend({name:"TopKeywords",template:n,count:{cols:6,rows:5},classNames:"",updateOnItemsTypeChange:!1,shouldBeColumns:!0,events:{"click ._link":"onLinkClick","contextmenu ._link":"onCustomLinkClick","mouseup ._link":"onCustomLinkClick"},initialize:function(){this.updateOnItemsTypeChange&&this.app.store.get("SearchQuery")&&(this.listenTo(this.app.store.get("SearchQuery"),"change",this.requestKeywords),this.listenTo(this.collection,"sync",this.render))},serialize:function(){return{countCols:this.count.cols,indexTabId:this.collection.type,keywordsTitle:s.findWhere(r,{type:this.collection.type}).label,topKeywordsList:this.shouldBeColumns?this.dividedIntoColumns(this.collection.serialize()):this.collection.serialize(),classNames:this.classNames}},requestKeywords:function(){this.collection.type=this.app.store.get("SearchQuery").defineItemsType(),this.collection.fetch()},dividedIntoColumns:function(e){var t=this;return s.chain(e).groupBy(function(e,i){return Math.floor(i/t.count.rows)}).toArray().value().slice(0,this.count.cols)},onLinkClick:function(e){e.ctrlKey||e.shiftKey||e.metaKey?this.trackNewTabClick(e):this.app.observer.broadcast("Track:UE:File:KeywordClick",{position:this.getItemIndex(e.currentTarget.innerText),text:e.currentTarget.innerText})},onCustomLinkClick:function(e){[a.rightMouse,a.middleMouse].includes(e.which)&&this.trackNewTabClick(e)},trackNewTabClick:function(e){this.app.observer.broadcast("Track:UE:ContextMenu:Open",{source:"Keywords",target:{target:"search"},params:{url:e.currentTarget.href,position:this.getItemIndex(e.currentTarget.innerText),text:e.currentTarget.innerText,type:"collection"}})},getItemIndex:function(e){var t=this.collection.serialize(),i=t.find(function(t){return t.name===e});return t.indexOf(i)+1}})},587:function(e,t,i){},588:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="top-keywords '+e.classNames+'"><h3 class="top-keywords__title">'+this.tr(e.keywordsTitle)+'</h3><div class="top-keywords__content top-keywords__content_cols'+t(e.countCols)+'">',s=e.topKeywordsList;if(s)for(var r=-1,n=s.length-1;r<n;){i+='<ul class="top-keywords__list list">';var a=s[r+=1];if(a)for(var o,l=-1,c=a.length-1;l<c;)i+='<li class="top-keywords__list-item list-item"><a class="top-keywords__link _link" href="'+(o=a[l+=1]).url+'">'+t(o.name)+"</a></li>";i+="</ul>"}return i+="</div></div>"}},603:function(e,t,i){"use strict";var s=i(4);e.exports=s.extend({url:"MinPrices",defaults:{image:null,vector:null,video:null,editorial:null,currency:null},getQueryParams:function(){return this.pickDefaultsFrom(this.attributes)},parse:function(e){return void 0===e&&(e={}),this.pickDefaultsFrom(e.data)}})},609:function(e,t,i){"use strict";i(610),i(611),i(583);var s=i(584),r=i(612),n=i(613),a=i(614),o=i(615),l=i(616),c=i(496),u=i(627),h=i(604),d=i(687),p=i(531),f=i(565),m=i(675),g={photo:r,vector:n,editorial:a,video:o};e.exports=c.extend({name:"FeaturedIndex",el:!1,template:l,defaultSnippetType:"photo",events:{"click ._submit":"onSubmit"},initialize:function(){this.app.user.isLoggedIn()||(this.model=new d({refUser:this.app.userSettings.get("refUser")},{app:this.app}),this.listenTo(this.model,{request:this.onModelRequest,sync:this.onModelReady}))},prepareRender:function(){this.setViews({"._snippet":this.getSnippetView(),"._signup-form":this.getAuthView(),"._condition":this.getSignUpConditionView()})},serialize:function(){return{snippetType:this.snippetType,authForm:!this.app.user.isLoggedIn(),titleText:this.getTitleText(),extendedCondition:this.hasExtendedCondition()}},clientAfterRender:function(){p(this.$el,Backbone.$),f(this.$("._submit")),m({$button:Backbone.$('<i class="password-switcher">'+this.tr("Show")+"</i>"),$target:this.$("._password"),text:{show:this.tr("Show"),hide:this.tr("Hide")}})},hasExtendedCondition:function(){return!this.app.user.isLoggedIn()&&this.app.features.isFeatureOnValue("Show Sign Up Condition")},getTitleText:function(){var e=this.tr("Sign Up and Get Free Weekly Stock Files");return"video"===this.snippetType?e=this.tr("Sign Up to Receive Stock Footage"):"vector"===this.snippetType&&(e=this.tr("Sign Up to Receive Illustrations and Graphics")),e},getSnippetView:function(){return this.snippetType?new c({el:!1,app:this.app,template:g[this.snippetType]||g[this.defaultSnippetType]}):[]},getAuthView:function(){return this.app.user.isLoggedIn()?[]:new u({app:this.app,model:this.model,template:s})},getSignUpConditionView:function(){return this.hasExtendedCondition()?new h({app:this.app,signUpModel:this.model}):[]},onModelRequest:function(){this.$("._submit").trigger("loading")},onModelReady:function(){this.$("._submit").trigger("loaded")},onSubmit:function(e){e.preventDefault(),this.getView("._signup-form").submit()}})},610:function(e,t,i){},611:function(e,t,i){},612:function(e,t,i){"use strict";e.exports=function(e){return'<div class="snippet"><h3 class="snippet__title">'+this.tr("What is<br /> Stock Photography?")+'</h3><div class="snippet__wrap"><i class="snippet__icon icon icon-quote-light"></i><span class="snippet__text">'+this.tr("<b>Stock Photography</b> are images that are sold with the help of photo stock websites by professional photographers that sell their work on a royalty-free basis. These photos can have wide usage rights or be used for editorial purposes only.")+"</span></div></div>"}},613:function(e,t,i){"use strict";e.exports=function(e){return'<div class="snippet"><h3 class="snippet__title">'+this.tr("What are<br /> Vector Graphics?")+'</h3><div class="snippet__wrap"><i class="snippet__icon icon icon-quote-light"></i><span class="snippet__text">'+this.tr("<b>Stock Vectors</b> are illustrations made with the help of a graphic editor and put up for sale on a photo stock website. Stock vectors include icons, logos and pictures. The most popular formats are PSD, EPS, SVG.")+"</span></div></div>"}},614:function(e,t,i){"use strict";e.exports=function(e){return'<div class="snippet"><h3 class="snippet__title">'+this.tr("What is Editorial Photography?")+'</h3><div class="snippet__wrap"><i class="snippet__icon icon icon-quote-light"></i><span class="snippet__text">'+this.tr("<b>Editorial Photos</b> are photos for editorial purposes that are sold on photo stock websites. Images showcase photos of people, events, landmarks or other symbols and can not be used for commercial purposes.")+"</span></div></div>"}},615:function(e,t,i){"use strict";e.exports=function(e){return'<div class="snippet"><h3 class="snippet__title">'+this.tr("What is Stock Video?")+'</h3><div class="snippet__wrap"><i class="snippet__icon icon icon-quote-light"></i><span class="snippet__text">'+this.tr("<b>Stock Videos</b> are videos that are about 60 sec made for commercial purposes. These videos are sold on photo stock websites for commercial purposes. Usually they are used on TV, Internet advertising, or for interface design.")+"</span></div></div>"}},616:function(e,t,i){"use strict";e.exports=function(e){var t='<div class="featured"><div class="featured__wrap">';return e.snippetType&&(t+='<div class="featured__snippet-box _snippet"></div>'),e.authForm&&(t+='<div class="featured__signup-box"><h3 class="featured__signup-title">'+e.titleText+'</h3><div class="featured__signup-form _signup-form"></div><button class="featured__signup-btn button button-xxxl button-watery button-blue button-bold _submit">'+this.tr("Register an Account")+"</button>",e.extendedCondition&&(t+='<div class="featured__signup-condition _condition"></div>'),t+="</div>"),t+="</div></div>"}},622:function(e,t,i){"use strict";var s=i(4);e.exports=s.extend({url:"Meta",getQueryParams:function(){}})},626:function(e,t,i){"use strict";var s=i(0),r=i(653),n=i(562);e.exports={getSeriesModelsByPageType:function(e){return this.isCorrectBaseOptions(e)&&r[e.seriesType][e.pageType]?this.getSeriesModels(e.app,r[e.seriesType][e.pageType]):{}},getSeriesModelsBySeriesType:function(e){var t=this;if(!this.isCorrectBaseOptions(e))return{};var i={};return s.each(r[e.seriesType],function(s,r){i[r]=t.getSeriesModels(e.app,s)}),i},isCorrectBaseOptions:function(e){return e&&e.app&&r[e.seriesType]},getSeriesModels:function(e,t){var i={};return s.each(t,function(t){i[t]=new n(s.extend({},s.findWhere(r.series,{name:t}),{lang:e.lang}),{app:e}),i[t].fetch()}),i}}},641:function(e,t,i){"use strict";var s=i(0),r=i(533),n=i(622),a=i(506),o=i(538),l=i(603),c=i(629),u=i(562),h=i(576),d=i(578),p=i(626);i(642),i(643);var f={photo:"ContentTypePhotos",vector:"ContentTypeVectors",editorial:"ContentTypeEditorials",video:"ContentTypeVideos"};e.exports=r.extend({initialize:function(){var e=this;this.app.store.link("SearchQuery",a.createInstance({app:this.app})),this.app.store.link("CartIndicator",new o({},{app:this.app,fetch:!0})),this.metaModel=new n([],{app:this.app}),this.metaModel.getQueryParams=function(){return{page:"index",params:{promoPage:"image"===e.pageType?"photo":e.pageType}}},this.metaModel.fetch(),this.seriesModels=p.getSeriesModelsByPageType({app:this.app,seriesType:"seriesByPages",pageType:this.pageType}),this.app.features.isFeatureOnValue("Content Type Landing Allowed")&&(this.seriesContentType=new u({lang:this.app.lang,name:f[this.pageType]},{app:this.app}),this.seriesContentType.fetch(),this.model=new h({parentId:0,name:this.modelName},{app:this.app}),this.model.fetch()),this.seriesFeatured=new u({lang:this.app.lang,name:"IndexFeaturedBg"},{app:this.app}),this.seriesFeatured.fetch(),this.minPrices=new l({},{app:this.app}),this.minPrices.fetch(),this.stats=new c({filesType:"photo"===this.pageType?"image":this.pageType},{app:this.app}),this.stats.fetch(),this.topKeywords=new d([],{app:this.app,type:"index"===this.pageType?"categories":this.pageType}),"index"!==this.pageType&&this.topKeywords.fetch(),this.app.currency.init()},getMeta:function(){var e=this.metaModel.toJSON(),t=s.values(this.seriesModels)[0].get("elements").first().get("resource").get("src").jpg;return{tags:[{tagName:"meta",selfClosing:!0,attributes:{property:"og:url",content:this.app.originalUrl}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:title",content:e.title}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:description",content:e.description}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:site_name",content:"Depositphotos"}},{tagName:"meta",selfClosing:!0,attributes:{property:"og:image",content:t}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:url",content:this.app.originalUrl}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:title",content:e.title}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:description",content:e.description}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:site",content:"@depositphotos"}},{tagName:"meta",selfClosing:!0,attributes:{property:"twitter:image",content:t}}],params:e}}})},642:function(e,t,i){},643:function(e,t,i){},644:function(e,t,i){"use strict";var s=i(645),r=i(16).keywordsTitles,n=i(496);e.exports=n.extend({name:"IndexPage",el:!1,template:s,title:"",description:"",serialize:function(){var e=this;return{featuredBg:this.seriesFeatured.getFirstImage(),title:this.title,description:this.description,categoriesTitle:(r.find(function(t){return t.type===e.pageType})||{}).label,shouldShowCategories:this.shouldShowCategories}}})},645:function(e,t,i){"use strict";e.exports=function(e){var t='<section class="index-page"><div class="index-page__poster index-page__poster_offset _index-poster-box"><div class="index-page__ratio-placeholder"></div><div class="index-page__search-bar search-bar-index _search-bar"></div><div class="index-page__poster-wrapper _index-poster"></div></div><div class="index-page__wrapper"><div class="index-page__info"><h1 class="index-page__info-title">'+this.tr("Royalty-Free Stock Photos, Vector Images and Videos")+'</h1><p class="index-page__info-desc">'+this.tr("Millions of high-quality royalty-free stock images and high-definition footage at the best prices to fill all your creative needs.")+'</p></div><div class="_label"></div><div class="index-page__content-grid-series _content-grid-series"></div><div class="index-page__featured _featured"';return e.featuredBg&&(t+=' style="background-image: url('+e.featuredBg+')"'),t+='></div><div class="index-page__keywords _top-keywords"></div></div></section>'}},679:function(e,t,i){"use strict";var s=i(0),r=i(4);e.exports=r.extend({url:"CuratedFolder",defaults:{id:null,count:1e4},parse:function(e){return e.errors?{}:s.pick(e.data,s.keys(this.defaults))},getLink:function(){return this.app.makeUrl("folder/curated-collection-"+this.get("id"))}})},686:function(e,t,i){"use strict";e.exports=function(e){var t="undefined"!=typeof _encodeHTML?_encodeHTML:function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return(null==e?"":""+e).replace(i,function(e){return t[e]||e})}}(),i='<div class="series-box';e.series.className&&(i+=" "+t(e.series.className)),i+=' _series-box">';var s=e.series.elements;if(s)for(var r,n=-1,a=s.length-1;n<a;)r=s[n+=1],i+='<div class="series-box__holder _series-box-item',!e.isDownloadLocked||r.url||r.urlVar||(i+=" series-box__lock"),i+='">',r&&("html"===r.resource.type&&(i+=""+t(r.elementContent)),"image"!==r.resource.type&&"video"!==r.resource.type||((r.trTitle||r.title)&&(i+='<div class="series-box__info-wrap"><a class="series-box__info-link _series-link" ',r.titleUrl&&(i+='href="'+r.titleUrl+'"'),i+='><span class="series-box__info-link-title">',r.trTitle?i+=""+this.tr(r.trTitle):i+=""+t(r.title),i+="</span>",r.subTitle&&(i+='<span class="series-box__info-link-author">'+this.seo.space+t(r.subTitle)+"</span>"),i+="</a></div>"),r.url||r.urlVar?(i+='<a class="series-box__link',e.isDownloadLocked&&(i+=" series-box__lock"),i+=' _series-link" href="'+(r.url||r.urlVar)+'" style="background-image: url('+t(r.resource.src.jpg)+')">',"image"===r.resource.type?i+='<img class="series-box__image" src="'+r.resource.src.jpg+'" alt="'+t(r.trAlt?this.tr(r.trAlt):r.alt||"")+'" />':(i+='<span class="series-box__video-box _series-video"><video class="video-js vjs-deposit-skin" poster="'+t(r.resource.src.jpg)+'" width="'+t(r.resource.width)+'" height="'+t(r.resource.height)+'">',r.resource.src.mp4&&(i+='<source type="video/mp4" src="'+r.resource.src.mp4+'"></source>'),e.isWebmAllowed&&r.resource.src.webm&&(i+='<source type="video/webm" src="'+r.resource.src.webm+'"></source>'),r.resource.src.ogg&&(i+='<source type="video/ogg" src="'+r.resource.src.ogg+'"></source>'),i+="</video></span>"),i+="</a>"):"image"===r.resource.type?i+='<img class="series-box__image" src="'+r.resource.src.jpg+'" alt="'+t(r.trAlt?this.tr(r.trAlt):r.alt||"")+'" />':(i+='<span class="series-box__video-box _series-video"><video class="video-js vjs-deposit-skin" poster="'+t(r.resource.src.jpg)+'" width="'+t(r.resource.width)+'" height="'+t(r.resource.height)+'">',r.resource.src.mp4&&(i+='<source type="video/mp4" src="'+r.resource.src.mp4+'"></source>'),e.isWebmAllowed&&r.resource.src.webm&&(i+='<source type="video/webm" src="'+r.resource.src.webm+'"></source>'),r.resource.src.ogg&&(i+='<source type="video/ogg" src="'+r.resource.src.ogg+'"></source>'),i+="</video></span>"),r.text&&(i+='<span class="series-box__sign">'+t(r.text)+"</span>"))),i+="</div>";return i+="</div>"}},763:function(e,t,i){"use strict";function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n=i(0),a=i(557);e.exports=a.extend({name:"PasswordForm",el:!1,events:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(i,!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},a.prototype.events,{"focus input":"handleFocusInput"}),serialize:function(){return this.model.serialize()},clientAfterRender:function(){this.initializePasswordSwitcher()},handleFocusInput:function(e){this.fieldReset(this.$(e.currentTarget.parentNode))},showError:function(e,t){var i=this;this.fieldReset(this.$("label.field-box_incorrect")),n.each(t,function(e,t){var s=Array.isArray(e)?e[0]:e;i.fieldIncorrect(i.$("input[name="+t+"]").parent(),{errorMessage:s})})},serializeForm:function(){return{oldPassword:this.$el.find("input[name=oldPassword]").val(),password1:this.$el.find("input[name=password1]").val(),password2:this.$el.find("input[name=password2]").val()}},submitForm:function(){var e=this,t=this.serializeForm();return new Promise(function(i,s){e.model.save(t,{wait:!0,success:function(e,t){return t.errors?s(t.errors):i(t)},error:function(e){s(e)}})})}})}}]);